<div class="sidenav-left">
  <mat-toolbar class="secondary-toolbar">
    <mat-toolbar-row *ngIf="viewController.getCurrentApp()">
      <mat-icon *ngIf="viewController.getCurrentApp().iconClasses"
                class="{{ viewController.getCurrentApp().iconClasses }}"></mat-icon>
      <mat-icon *ngIf="viewController.getCurrentApp().iconName">
        {{viewController.getCurrentApp().iconName}}
      </mat-icon>
      <span>{{ viewController.getCurrentApp().name }}</span>
    </mat-toolbar-row>
    <mat-toolbar-row *ngIf="!viewController.getCurrentApp()">
      <span *ngIf="appTitle">{{appTitle}}</span>
    </mat-toolbar-row>
  </mat-toolbar>
  <div class="submodule-list">
    <ng-container *ngFor="let submodule of viewController.getSubmodules()">
      <ng-container *ngTemplateOutlet="module; context: {submodule: submodule}"></ng-container>
    </ng-container>
    <ng-container *ngFor="let submodule of viewController.getAppSubmodules(viewController.getCurrentApp());
                          index as j;">
      <ng-container *ngTemplateOutlet="module; context: {submodule: submodule}"></ng-container>
    </ng-container>
    <ng-container *ngFor="let group of viewController.getGroups()">
      <mat-accordion>
        <mat-expansion-panel [expanded]="!group.collapsibleByDefault"
                             [attr.data-se]="'nav-group-'+group.key"
                             [disabled]="!group.collapsible">
          <mat-expansion-panel-header>
            <mat-panel-title>{{group.name}}</mat-panel-title>
          </mat-expansion-panel-header>
          <ng-container *ngFor="let submodule of viewController.getGroupSubmodules(group);
                          index as j;">
            <ng-container *ngTemplateOutlet="module; context: {submodule: submodule}"></ng-container>
          </ng-container>
        </mat-expansion-panel>
      </mat-accordion>
    </ng-container>
    <div class="fill-space"></div>
    <div class="submodule-list-control" *ngIf="sideNavCollapsible">
      <button mat-icon-button
              (click)="viewController.toggleLeftSidenav()">
        <mat-icon *ngIf="viewController.view.leftSidebarOpened">first_page</mat-icon>
        <mat-icon *ngIf="!viewController.view.leftSidebarOpened">last_page</mat-icon>
      </button>
    </div>
  </div>
</div>
<ng-template let-submodule="submodule" #module>
  <button mat-menu-item
          tabindex="-1"
          routerLinkActive="active"
          [attr.data-se]="'nav-' + submodule.key"
          routerLink="/{{viewController.getRealmId()}}/{{submodule.routerLink}}">
    <mat-icon *ngIf="submodule.iconClasses" class="{{ submodule.iconClasses }}"></mat-icon>
    <mat-icon *ngIf="submodule.iconName">{{submodule.iconName}}</mat-icon>
    <span>{{submodule.name}}</span>
  </button>
</ng-template>
<!-- ↓ FIXME We will need to revisit this. -->
<!--<div class="b-t font-sm"-->
<!--     style="position: absolute; bottom:0; height: 64px; width: 100%; z-index: 100; background-color: white; display:flex; flex-direction: row; justify-content: center;">-->
<!--  <div style="align-self: center;">-->
<!--    <a href="https://www.dnastack.com" target="_blank" class="m-r-sm">© DNAstack</a>-->
<!--    <a href="https://dnastack.com/#/legal/privacy" target="_blank" class="m-r-sm">Privacy Policy</a>-->
<!--    <a href="https://dnastack.com/#/legal/terms" target="_blank" class="m-r-sm">Terms of Use</a>-->
<!--  </div>-->
<!--</div>-->
